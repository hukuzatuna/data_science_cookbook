@
<<diamonds-model>>=
require(ggplot2)
getwd()
quit()
x <- seq(1:1000)
y <- 1.8*x + 200 + rnorm(1000, 150, 200)
plot(x,y, col="red")
tmpLM <- lm(y ~ x)
abline(tmpLM, col="blue")
summary(tmpLM)
abline(tmpLM, col="green")
setwd("/Users/phmoyer/Documents/data_analysis")
dir()
setwd("Books")
dir()
setwd("..")
setwd("data_science_cookbook")
dir()()
dir()
setwd("ch1")
dir()
source(".Rdata")
load(".Rdata")
library(plyr)
library(dplyr)
library(ggplot2)
gasCars4 <- subset(gasCars, cylinders == "4")
ggplot(gasCars4) + aes(factor(year), comb08) + goem_boxplot() + vacet_wrape(~trany2, ncol=1) + theme(axis.text.x = element_text(angle=45)) + labs(x="Year", y="MPG")
ggplot(gasCars4) + aes(factor(year), comb08) + geom_boxplot() + facet_wrape(~trany2, ncol=1) + theme(axis.text.x = element_text(angle=45)) + labs(x="Year", y="MPG")
ggplot(gasCars4) + aes(factor(year), comb08) + geom_boxplot() + facet_wrap(~trany2, ncol=1) + theme(axis.text.x = element_text(angle=45)) + labs(x="Year", y="MPG")
ggplot(gasCars4) + aes(factor(year), fill = factor(trany2)) + geom_bar(position="fill") + labs(x="Year", y="Proportion of cars", fill="Transmission") + theme(axis.text.x=element_text(angle=45)) + geom_hline(yinterceept=0.5, lintype=2)
carsMake <- ddply(gasCars4, ~year, summarise, numberOfMakes = length(unique(make)))
head(carsMake)
ggplot(carsMake) + aes(year, numberOfMakes) + geom_point() + labs(x="Year", y="Number of available makes") + gggtitle("Four cylinder cars")
ggplot(carsMake) + aes(year, numberOfMakes) + geom_point() + labs(x="Year", y="Number of available makes") + ggtitle("Four cylinder cars")
uniqMakes <- dlply(gasCars4, ~year, function(x) unique(x$make))
commonMakes <- Reduce(intersect, uniqMakes)
commonMakes
carsCommonMakes4 <- subset(gasCars4, make %in% commonMakes)
avgMPG_commonMakes <- ddply(carsCommonMakes4, ~year + make, summarise, avgMPG = mean(comb08))
ggplot(avgMPG_commonMakes, aes(year, avgMPG)) + geom_line() + facet_wrap(~make, nrow=3)
